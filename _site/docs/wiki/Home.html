<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Welcome to xping365-sdk repository | XPing365 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Welcome to xping365-sdk repository | XPing365 ">
      
      <link rel="icon" href="../../images/favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/XPing365/xping365-sdk/blob/main/docs/wiki/Home.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../images/logo.svg" alt="XPing365">
            XPing365
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="welcome-to-xping365-sdk-repository">Welcome to xping365-sdk repository</h1>

<p>Learn about <em>XPing365 SDK</em>, a free and an open source library written in C# to help automate web applications testing.</p>
<h2 id="whats-xping-365-sdk">What's XPing 365 SDK</h2>
<p>XPing365 SDK helps you automate web applications testing. It is designed to make eXternal Ping(s) to web applications to verify its availability and monitor its content by scraping data from the web pages. It allows users to parametrize URLs and generate hundrets of different queries.</p>
<h2 id="getting-started-with-xping-365-sdk">Getting started with XPing 365 SDK</h2>
<p>In this quickstart, you will learn how to:</p>
<ul>
<li>Use <a href="https://docs.microsoft.com/en-us/dotnet/core/extensions/dependency-injection">Dependency injection in .NET</a> to setup the library</li>
<li>Declare a class which will represent your web-page you're going to test</li>
<li>Fetch the web-page and write tests</li>
</ul>
<h2 id="setup-the-library">Setup the library</h2>
<p>This library uses dependency injection supported by the .NET framework. Please follow this link <a href="https://docs.microsoft.com/en-us/dotnet/core/extensions/dependency-injection">Dependency injection in .NET</a> to learn more about it. This tutorial assumes you have basic knowledge about this software design pattern.</p>
<p>The SDK consists of two main services: <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/IWebDataRetriever.cs">IWebDataRetriever</a> and <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/Parser/IParserFactory.cs">IParserFactory</a>. The first service is implemented by a concrete type <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/WebDataRetriever.cs">WebDataRetriever</a> and is responsible to fetch web-page content. It has a dependency to other services like <code>IHttpClientFactory</code>, <code>IConfiguration</code>, <code>ILogger</code> and <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/Parser/IParserFactory.cs">IParserFactory</a> which is responsible to parse the HTML content. Except <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/Parser/IParserFactory.cs">IParserFactory</a> all other services are provided by the .NET framework. <code>IConfiguration</code> and <code>ILogger</code> are resolved automatically, however <code>IHttpClientFactory</code> requires setup.</p>
<h3 id="configuring-ihttpclientfactory-with-dependency-injection">Configuring IHttpClientFactory with dependency injection</h3>
<p>There are <a href="https://docs.microsoft.com/en-us/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests#multiple-ways-to-use-ihttpclientfactory">multiple ways</a> to use <code>IHttpClientFactory</code>. For the sake of brevity, this guidance uses <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/http-requests?view=aspnetcore-6.0#named-clients">Named Client</a>.</p>
<pre><code class="lang-c#">builder.Services.AddHttpClient(&quot;httpClient&quot;, httpClient =&gt;
{
    httpClient.BaseAddress = new Uri(&quot;https://www.demoblaze.com/&quot;);
});
</code></pre>
<p>The name <code>httpClient</code> given in the above setup is provided to <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/WebDataRetriever.cs">WebDataRetriever</a> through <code>IConfiguration</code> service. Example of <code>appsettings.json</code> configuration fulfilling above requirement is shown below</p>
<pre><code class="lang-json">{
  &quot;WebDataRetriever&quot;: {
    &quot;HttpClientName&quot;: &quot;httpClient&quot;,
    &quot;ThrowOnError&quot;:  true
  }
}
</code></pre>
<p>It is also possible to use other options to configure <code>IHttpClientFactory</code> service. If you configure your <code>IHttpClientFactory</code> using basic setup, then no configuration is required. If you want to learn more about <code>WebDataRetriever</code> configuration file please follow the <code>Configuration</code> page of this wiki.</p>
<p>Once all above is configured the full setup looks like this</p>
<pre><code class="lang-c#">private static IHost Initialize()
{
    var host = Host.CreateDefaultBuilder()
                   .ConfigureServices(services =&gt;
                   {
                       services.AddHttpClient&lt;IWebDataRetriever, WebDataRetriever&gt;(&quot;httpClient&quot;, client =&gt;
                       {
                           client.BaseAddress = new Uri(&quot;https://www.demoblaze.com/&quot;);
                       });
                       services.AddTransient&lt;IParserFactory, ParserFactory&gt;();
                       services.AddTransient&lt;IWebDataRetriever, WebDataRetriever&gt;();
                   })
                   .Build();
    return host;
}
</code></pre>
<h2 id="declaring-web-page-classes">Declaring web-page classes</h2>
<p>Next step is to define classes which will represent web-pages you are going to test. Each class representing a web-page you are passing to <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/IWebDataRetriever.cs">IWebDataRetriever</a> service needs to derive from <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/Source/HtmlSource.cs">HtmlSource</a>, for instance</p>
<pre><code class="lang-c#">public class HomePage : HtmlSource
{
    [XPath(&quot;//head/title&quot;, ReturnType.InnerText)]
    public string? Title { get; set; }
    
    [XPath(&quot;//a[@id='nava']/img&quot;, &quot;src&quot;)]
    public string? LogoUrl { get; set; }
    
    [XPath(&quot;//div[@id='navbarExample']/ul&quot;)]
    public MainMenu? MainMenu { get; set; }
}
</code></pre>
<p>The <code>XPathAttribute</code> which decorates public properties guides <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/Parser/IParser.cs">IParser</a> how to retrieve content from the HTML source and populate the class. The class representing web-page might consist of other classes which describe other components of the web-page, i.e. MainMenu. In this case the <a href="https://github.com/XPing365/xping365-sdk/blob/main/samples/SimpleTestsSample/Pages/Components/MainMenu.cs">MainMenu</a> does not to have to derive from <code>HtmlSource</code>. It's declaration is shown as follows:</p>
<pre><code class="lang-c#">public class MainMenu
{
    public class MenuItem
    {
        [XPath(&quot;./a&quot;, ReturnType.InnerText)]
        public string? Text { get; set; }
        [XPath(&quot;./a&quot;, &quot;href&quot;)]
        public string? Link { get; set; }
    }

    [XPath(&quot;.//li&quot;)]
    public IList&lt;MenuItem&gt;? Items { get; set; }
}
</code></pre>
<p>In this example all the <code>XPathAttribute</code> properties are relative to the <code>XPathAttribute</code> property declared in <code>HomePage</code> class for this type.</p>
<h2 id="web-page-verification">Web-page verification</h2>
<p>Once the library is setup and web-page classes are declared we fetch the content of the web-page and pupulate the declared class with it based on the <code>XPathAttribute</code> decorated in public properties. First we should get the <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/IWebDataRetriever.cs">IWebDataRetriever</a> service, i.e.</p>
<pre><code class="lang-c#">var webDataRetriever = host.Services.GetRequiredService&lt;IWebDataRetriever&gt;();
</code></pre>
<p>Next we use <a href="https://github.com/XPing365/xping365-sdk/blob/main/src/XPing365.Core/IWebDataRetriever.cs">IWebDataRetriever</a> API to fetch the content and populate our class as follows:</p>
<pre><code class="lang-c#">HomePage? homePage = await webDataRetriever.GetFromHtmlAsync&lt;HomePage&gt;(&quot;/home.html&quot;);
</code></pre>
<p>Finally we write tests against the retrieved <code>HomePage</code> class. Please refer to the <code>Samples</code> folder in this repository to check how such tests can be implemented.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/XPing365/xping365-sdk/blob/main/docs/wiki/Home.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
